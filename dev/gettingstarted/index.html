<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · DynamicStallModels.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DynamicStallModels.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Getting Started</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../riso_example/">Risø Model</a></li><li><a class="tocitem" href="../beddoesleishman_example/">Beddoes-Leishman</a></li></ul></li><li><span class="tocitem">Developers</span><ul><li><a class="tocitem" href="../codeoutline/">Code Outline</a></li><li><a class="tocitem" href="../riso_theory/">Risø Theory</a></li><li><a class="tocitem" href="../beddoesleishman_theory/">Beddoes-Leishman Theory</a></li></ul></li><li><a class="tocitem" href="../apireference/">API Reference</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/byuflowlab/DynamicStallModels.jl/blob/master/docs/src/gettingstarted.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h1><p>The dynamic stall models are implemented in three ways: as a functional, an iterative, and in an indicial form. </p><p>Functional implementations create a struct that returns the state rates. This allows for easy solution using DifferentialEquations.jl. These functional implementations are designed to be passed a single set of parameters, <span>$p$</span>. Out of this set of parameters, several are functions, such as the freestream velocity. </p><p>Iterative implementations create a struct that returns the state rates as well, however they are not as easily solved by DifferentialEquations.jl. The input parameters are now all constant values, including the freestream velocity and angle of attack. This implementation is designed to be solved iteratively, meaning that for a given set of parameters, the states are updated for a single time step. The purpose of this type of implementation is for interfacing with other packages, specifically Rotors.jl. In the future, a function will be introduced that converts functions that describe environmental inputs into parameters, and then iterates through the solution of the model. </p><p>The final implementation is an indicial formulation. Rather than providing a state space model to be solve, the model takes the environmental inputs and time step and calculates the states at the next time step. Several of the dynamic stall models included in this pakage were first developed in indicial form. </p><p>We&#39;ll get started by using a functional implementation of the Risø model. Because we are using a functional implementation, we willl need our flow conditions as functions of time. We&#39;ll simulate a flat plate pitching in steady inflow. We&#39;ll look at a freestream velocity of 1 m/s, while the airfoil pitches plus or minus 1 degree (amplitude of 2) about 5 degrees. </p><pre><code class="language-julia hljs">k = 0.2 #reduced frequency
u = 1.0 #freestream velocity (m/s) 
c = 1.0 #Chord (m)
amplitude = 2
shift = 5

omega = k*2*u/c #Rate of oscillation

### Prepare inputs
U(t) = u #Freestream velocity as a function of time
Udot(t) = 0.0 #Derivative of freestream velocity as a function of time
alpha(t) = (amplitude*sin(omega*t) + shift)*(pi/180) #Angle of attack as a function of time (radians)
alphadot(t) = (amplitude*omega*cos(omega*t)*(pi/180)) #Pitching rate as a function of time (radians)</code></pre><p>At this point, we would normally read in an airfoil polar, however, since we are simulating a flat plate, we will use the inviscid solution for lift for a flat plate. </p><pre><code class="language-julia hljs">
aoa = -pi:0.01:pi #Angle of Attack, (radians)
lift = 2*pi.*(aoa) #Coefficient of lift
drag = zero(aoa) #Coefficient of drag, left zero for this demonstration. 
polar = hcat(aoa, lift, drag)

A = [0.165, 0.335] #From the Hansen 2004 paper, for flat plate
b = [0.0455, 0.3000] # &quot;&quot; &quot;&quot;

Tp = 3.0 # &quot;&quot; &quot;&quot; 
Tf = 6.0 # &quot;&quot; &quot;&quot; 
T = [Tp, Tf]</code></pre><p>Now at this point, we&#39;ll store that information in an airfoil struct. </p><pre><code class="language-julia hljs">using DynamicStallModels

airfoils = Array{Airfoil, 1}(undef, 1)
airfoils[1] = airfoil(polar; A, b, T)</code></pre><p>If we had more airfoils, we would simply add them to the airfoils array. </p><p>Now we&#39;ll create the Risø struct, which will be our ODE to solve. </p><pre><code class="language-julia hljs">dsmodel = Riso(airfoils; detype=Functional())</code></pre><p>And now we prepare to solve using DifferentialEquations.jl. Note the order of <span>$p$</span> below, this is the required order. If simulating more than one airfoil, the chord lengths would be concatonated. So <code>p = vcat([U, Udot, alpha, alphadot], [c])</code>.</p><pre><code class="language-julia hljs">using DifferentialEquations
x0 = zeros(4) #Hansen 2004&#39;s suggest initial conditions.
x0[3] = 1.0

p = [U, Udot, alpha, alphadot, c]

tspan = (0.0, 80.0)

prob = ODEProblem(dsmodel, x0, tspan, p)</code></pre><p>Now let&#39;s solve using DifferentialEquations. A function to parse the DifferentialEquations solution and calculate the coefficients of lift and drag has been provided. </p><pre><code class="language-julia hljs">sol = solve(prob, dtmax=0.1)

Cl, Cd, t =  parsesolution(dsmodel, sol, p)</code></pre><p>Also if the user has a specific set of states they would like to analyze, they can extract the states on their own and use the provided functions to calculate the coefficients. </p><pre><code class="language-julia hljs">### Unpack
x = Array(sol)&#39;
t = sol.t

nt = length(t)

clvec = zeros(nt, dsmodel.n)
cdvec = zeros(nt, dsmodel.n)
### run through the time steps and calculate the dynamic lift and drag (based on the states)
for i = 1:nt
    ti = t[i]
    for j = 1:dsmodel.n
        clvec[i,j], cdvec[i,j] = riso_coefficients(x[i,:], U(ti), alpha(ti), alphadot(ti), cvec[j], dsmodel.airfoils[j])
    end
end</code></pre><p>Here we use Plots.jl to visualize the lift and compare against the values given in Hansen&#39;s 2004 paper where the model was presented. Note that shown is Hansen&#39;s indicial solution, whereas here we solve the state space model, so minor differences exist. </p><pre><code class="language-julia hljs">using Plots
alphavec = alpha.(sol.t)

expdata = readdlm(&quot;./data/Hansen2004/figure8_flatplate/indicial.csv&quot;, &#39;,&#39;)


clplt = plot(legend=:topleft, title=&quot;Cyclic Alpha&quot;, yaxis=&quot;Cl&quot;, xaxis=&quot;Alpha (deg)&quot;)
scatter!(expdata[:,1], expdata[:,2], lab=&quot;Hansen 2004&quot;)
plot!(alphavec.*(180/pi), Cl, lab=&quot;DSM - Riso&quot;)
plot!(alphavec.*(180/pi), linearlift.(alphavec), lab=&quot;Static&quot;)
display(clplt)</code></pre><p><img src="../figures/flatplate_lift_oscillations.svg" alt/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../riso_example/">Risø Model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 26 January 2023 20:00">Thursday 26 January 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
